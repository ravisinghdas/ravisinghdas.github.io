"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3485],{3485:(k,d,c)=>{c.r(d),c.d(d,{LoginPageModule:()=>y});var l=c(177),s=c(4341),a=c(4742),p=c(2787),n=c(4438),m=c(4212);function u(o,t){if(1&o&&(n.j41(0,"p",20),n.EFF(1),n.k0s()),2&o){const r=n.XpG().$implicit;n.R7$(),n.SpI(" ",r.message," ")}}function h(o,t){if(1&o&&(n.qex(0),n.DNE(1,u,2,1,"p",19),n.bVm()),2&o){const r=t.$implicit,e=n.XpG();n.R7$(),n.Y8G("ngIf",e.loginForm.get("email").hasError(r.type)&&(e.loginForm.get("email").dirty||e.loginForm.get("email").touched))}}function f(o,t){if(1&o&&(n.j41(0,"p",20),n.EFF(1),n.k0s()),2&o){const r=n.XpG().$implicit;n.R7$(),n.SpI(" ",r.message," ")}}function P(o,t){if(1&o&&(n.qex(0),n.DNE(1,f,2,1,"p",19),n.bVm()),2&o){const r=t.$implicit,e=n.XpG();n.R7$(),n.Y8G("ngIf",e.loginForm.get("password").hasError(r.type)&&(e.loginForm.get("password").dirty||e.loginForm.get("password").touched))}}function _(o,t){1&o&&n.nrm(0,"ion-spinner",21)}function v(o,t){1&o&&(n.j41(0,"ion-text"),n.EFF(1,"SIGN IN"),n.k0s())}const w=[{path:"",component:(()=>{var o;class t{handleKeyboardEvent(e){this.login()}constructor(e){this.service=e,this.passwordType="password",this.passwordIcon="eye",this.processing=!1,this.validation_messages={email:[{type:"required",message:"Email is required."},{type:"pattern",message:"Enter a valid email."}],password:[{type:"required",message:"Password is required."}]}}ngOnInit(){this.loginForm=new s.gE({email:new s.MJ("",[s.k0.required,s.k0.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")]),password:new s.MJ("",[s.k0.required])})}hideShowPassword(){this.passwordType="text"===this.passwordType?"password":"text",this.passwordIcon="eye"===this.passwordIcon?"eye-off":"eye"}login(){this.loginForm.markAllAsTouched(),this.loginForm.valid&&(this.processing=!0,this.service.login(this.loginForm.value).subscribe(e=>{const{success:i}=e;this.service.account=i,this.service.accessToken=i.token,this.service.refreshToken=i.refresh_token,this.service.isAuthenticated.next(!0),this.service.storage.set(i),this.processing=!1,this.service.goToRoot("/map",{replaceUrl:!0})},e=>{this.processing=!1,this.service.presentAlert(e.error.error.emailError||e.error.error.passwordError)}))}}return(o=t).\u0275fac=function(e){return new(e||o)(n.rXU(m.d))},o.\u0275cmp=n.VBU({type:o,selectors:[["app-login"]],hostBindings:function(e,i){1&e&&n.bIt("keydown.enter",function(M){return i.handleKeyboardEvent(M)},!1,n.EBC)},decls:23,vars:8,consts:[[1,"ion-no-padding"],[1,"full"],["size","12",1,"center","ion-padding"],[3,"ngSubmit","formGroup"],["size","12",1,"ion-text-center","mb-50"],["src","assets/paj-gps-logo.png","alt","",1,"logo"],["size","12",1,"ion-text-center"],["detail","false","lines","none",1,"ion-no-padding","mb-0"],["name","mail-outline","slot","start","size","medium"],["type","email","formControlName","email","placeholder","Enter email"],[4,"ngFor","ngForOf"],["detail","false","lines","none",1,"mt-15","mb-0","ion-no-padding"],["name","lock-closed-outline","slot","start","size","medium"],["placeholder","Enter password","formControlName","password","clearOnEdit","false",3,"type"],["slot","end","size","small",1,"cursor-cls",3,"click","name"],["size","12"],["expand","block","shape","round","type","submit",1,"ion-text-uppercase","ion-margin-vertical",3,"disabled"],["name","bubbles",4,"ngIf"],[4,"ngIf"],["class","error-p",4,"ngIf"],[1,"error-p"],["name","bubbles"]],template:function(e,i){1&e&&(n.j41(0,"ion-content")(1,"ion-grid",0)(2,"ion-row",1)(3,"ion-col",2)(4,"form",3),n.bIt("ngSubmit",function(){return i.login()}),n.j41(5,"ion-row")(6,"ion-col",4),n.nrm(7,"img",5),n.k0s(),n.j41(8,"ion-col",6)(9,"ion-item",7),n.nrm(10,"ion-icon",8)(11,"ion-input",9),n.k0s(),n.DNE(12,h,2,1,"ng-container",10),n.k0s(),n.j41(13,"ion-col",6)(14,"ion-item",11),n.nrm(15,"ion-icon",12)(16,"ion-input",13),n.j41(17,"ion-icon",14),n.bIt("click",function(){return i.hideShowPassword()}),n.k0s()(),n.DNE(18,P,2,1,"ng-container",10),n.k0s(),n.j41(19,"ion-col",15)(20,"ion-button",16),n.DNE(21,_,1,0,"ion-spinner",17)(22,v,2,0,"ion-text",18),n.k0s()()()()()()()()),2&e&&(n.R7$(4),n.Y8G("formGroup",i.loginForm),n.R7$(8),n.Y8G("ngForOf",i.validation_messages.email),n.R7$(4),n.Y8G("type",i.passwordType),n.R7$(),n.Y8G("name",i.passwordIcon),n.R7$(),n.Y8G("ngForOf",i.validation_messages.password),n.R7$(2),n.Y8G("disabled",i.processing),n.R7$(),n.Y8G("ngIf",i.processing),n.R7$(),n.Y8G("ngIf",!i.processing))},dependencies:[l.Sq,l.bT,s.qT,s.BC,s.cb,a.Jm,a.hU,a.W9,a.lO,a.iq,a.$w,a.uz,a.ln,a.w2,a.IO,a.Gw,s.j4,s.JD],styles:["ion-content[_ngcontent-%COMP%]{--background: transparent}ion-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]{background:#fff;width:100%;height:100%}ion-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   .full[_ngcontent-%COMP%]{height:100%}ion-content[_ngcontent-%COMP%]   img.logo[_ngcontent-%COMP%]{width:100%;max-width:50%;margin-bottom:0}ion-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: var(--ion-color-white);--background-hover: var(--ion-color-white);--background-activated: var(--ion-color-white);--background-focused: var(--ion-color-white);--border-radius: 100px;--padding-start: 16px;--padding-top: 5px;--padding-bottom: 5px;max-width:80%;margin:auto auto 15px;--border-width: 1px;--border-style: solid;--border-color: var(--ion-color-black);--color: var(--ion-color-white)}ion-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{color:var(--ion-color-black)}ion-content[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-black)}ion-content[_ngcontent-%COMP%]   ion-icon[slot=start][_ngcontent-%COMP%]{margin-right:16px!important}ion-content[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{height:56px;max-width:80%;margin:22px auto;color:var(--ion-color-white)!important}form[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center;justify-content:center;-webkit-justify-content:center;flex-direction:column}.mb-50[_ngcontent-%COMP%]{margin-bottom:50px}"]}),t})()}];let b=(()=>{var o;class t{}return(o=t).\u0275fac=function(e){return new(e||o)},o.\u0275mod=n.$C({type:o}),o.\u0275inj=n.G2t({imports:[p.iI.forChild(w),p.iI]}),t})(),y=(()=>{var o;class t{}return(o=t).\u0275fac=function(e){return new(e||o)},o.\u0275mod=n.$C({type:o}),o.\u0275inj=n.G2t({imports:[l.MD,s.YN,a.bv,b,s.X1]}),t})()}}]);